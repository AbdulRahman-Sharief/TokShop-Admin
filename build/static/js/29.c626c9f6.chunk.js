(this.webpackJsonptokshop=this.webpackJsonptokshop||[]).push([[29],{223:function(e,t,s){"use strict";s.r(t);var a=s(0),l=s(16),n=s(47),c=s(55),i=s(61),o=s(50),r=s(46),d=s(45),b=s(44),j=s(91),x=s(1);var h=e=>{let{packages:t,openEdit:s,startDelete:a}=e;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.TableBody,{children:null===t||void 0===t?void 0:t.map((e=>Object(x.jsxs)(l.TableRow,{children:[Object(x.jsxs)(l.TableCell,{children:[Object(x.jsx)("span",{className:"text-sm",children:e.name})," "]}),Object(x.jsxs)(l.TableCell,{children:[Object(x.jsx)("span",{className:"text-sm",children:e.discount})," "]}),Object(x.jsxs)(l.TableCell,{children:[Object(x.jsx)("span",{className:"text-sm",children:b(e.expire).format("MMM D, YYYY")})," "]}),Object(x.jsx)(l.TableCell,{children:Object(x.jsx)("span",{className:"text-sm",children:b(e.createdAt).format("MMM D, YYYY")})}),Object(x.jsx)(l.TableCell,{children:Object(x.jsx)(j.a,{id:e._id,title:e.name,openEdit:s,startDelete:a})})]},e._id)))})})},m=s(56),u=s(48);var g=e=>{let{closeHandler:t}=e;const[s,n]=Object(a.useState)(),[c,i]=Object(a.useState)(),[o,r]=Object(a.useState)(),[d,b]=Object(a.useState)(""),[j,h]=Object(a.useState)(!1);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(l.Card,{className:"mt-10 min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:[Object(x.jsx)("div",{className:"p-2 bg-gray-700 shadow-md border-gray-900 text-white m-2 inline-block rounded cursor-pointer",onClick:()=>{t(),h(!1)},children:Object(x.jsx)(m.b,{})}),Object(x.jsxs)(l.CardBody,{className:"flex flex-col justify-start",children:[d&&Object(x.jsxs)("p",{className:"mb-5 bg-red-600 text-white font-semibold p-2 rounded flex items-center gap-2",children:[Object(x.jsx)(u.j,{className:"text-2xl text-yellow-200"})," ",d]}),Object(x.jsxs)("div",{className:"mb-5 flex flex-col gap-4",children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{className:"text-white font-semibold",children:"Name"}),Object(x.jsx)("input",{type:"text",onChange:e=>n(e.target.value),value:s,className:"p-2 mt-2 bg-gray-700 rounded w-full outline-none text-white"})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{className:"text-white font-semibold",children:"Discount"}),Object(x.jsx)("input",{type:"number",onChange:e=>i(e.target.value),value:c,className:"p-2 mt-2 bg-gray-700 rounded w-full outline-none text-white"})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{className:"text-white font-semibold",children:"Expire Date"}),Object(x.jsx)("input",{type:"date",onChange:e=>r(e.target.value),className:"p-2 mt-2 bg-gray-700 rounded w-full outline-none text-white"})]})]}),Object(x.jsx)("button",{disabled:j,onClick:()=>{h(!0),(()=>{if(console.log(""===s),""===s||""===c||""===o)return h(!1),b("Please Enter Non Empty Values");const e={name:s,expire:o,discount:c},a="https://mix-mart.online/coupons";console.log("URL => ",a),console.log("Data => ",e),fetch(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)return h(!1),b("Something Went Wrong, Please Refresh And Try Again");e.json()})).then((e=>{console.log(e),b(""),t(),h(!1),window.location.reload()}))})()},className:"bg-green-500 text-white rounded p-3 font-semibold hover:bg-green-600 duration-300 focus:outline-none",children:"Create Package"})]})]})})};var O=e=>{let{closeHandler:t,data:s}=e;const[n,c]=Object(a.useState)(s.name),[i,o]=Object(a.useState)(s.discount),[r,d]=Object(a.useState)(),[b,j]=Object(a.useState)(""),[h,g]=Object(a.useState)(!1);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(l.Card,{className:"mt-10 min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:[Object(x.jsx)("div",{className:"p-2 bg-gray-700 shadow-md border-gray-900 text-white m-2 inline-block rounded cursor-pointer",onClick:()=>{t(),g(!1)},children:Object(x.jsx)(m.b,{})}),Object(x.jsxs)(l.CardBody,{className:"flex flex-col justify-start",children:[b&&Object(x.jsxs)("p",{className:"mb-5 bg-red-600 text-white font-semibold p-2 rounded flex items-center gap-2",children:[Object(x.jsx)(u.j,{className:"text-2xl text-yellow-200"})," ",b]}),Object(x.jsxs)("div",{className:"mb-5 flex flex-col gap-4",children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{className:"text-white font-semibold",children:"Name"}),Object(x.jsx)("input",{type:"text",onChange:e=>c(e.target.value),value:n,className:"p-2 mt-2 bg-gray-700 rounded w-full outline-none text-white"})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("p",{className:"text-white font-semibold",children:"Discount"}),Object(x.jsx)("input",{type:"number",onChange:e=>o(e.target.value),value:i,className:"p-2 mt-2 bg-gray-700 rounded w-full outline-none text-white"})]}),Object(x.jsxs)("label",{children:[Object(x.jsxs)("p",{className:"text-white font-semibold",children:["Expire Date ",Object(x.jsx)("span",{className:"text-xs text-green-500",children:"(You can leave it empty)"})]}),Object(x.jsx)("input",{type:"date",onChange:e=>d(e.target.value),className:"p-2 mt-2 bg-gray-700 rounded w-full outline-none text-white"})]})]}),Object(x.jsx)("button",{disabled:h,onClick:()=>{g(!0),(()=>{if(""===n||""===i||""===r)return g(!1),j("Please Enter Non Empty Values");const e={name:n,discount:i,expire:r};r||(e.expire=s.expire),console.log(e);const a="https://mix-mart.online/coupons/"+s._id;fetch(a,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)return j("Something Went Wrong, Please Refresh And Try Again");e.json()})).then((e=>{j(""),t(),g(!1),window.location.reload()}))})()},className:"bg-green-500 text-white rounded p-3 font-semibold hover:bg-green-600 duration-300 focus:outline-none",children:"Update Package"})]})]})})};var p=e=>{let{closeHandler:t,id:s,title:n}=e;const[c,i]=Object(a.useState)("");return Object(x.jsxs)(l.Card,{className:"mt-10 min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:[Object(x.jsx)("div",{className:"p-2 bg-gray-700 shadow-md border-gray-900 text-white m-2 inline-block rounded cursor-pointer",onClick:t,children:Object(x.jsx)(m.b,{})}),c&&Object(x.jsxs)("p",{className:"mb-5 bg-red-600 text-white font-semibold p-2 rounded flex items-center gap-2",children:[Object(x.jsx)(u.j,{className:"text-2xl text-yellow-200"})," ",c]}),Object(x.jsxs)(l.CardBody,{className:"flex flex-col justify-start pt-0",children:[Object(x.jsxs)("p",{className:"text-center text-white mb-4 font-semibold",children:['Are You Sure You Want To Delete "',n,'" ?']}),Object(x.jsxs)("div",{className:"flex justify-center gap-5",children:[Object(x.jsx)("button",{onClick:t,className:"bg-gray-600 text-white rounded py-2 px-5 font-semibold hover:bg-gray-700 duration-300 focus:outline-none",children:"Cancel"}),Object(x.jsx)("button",{onClick:()=>{fetch("https://mix-mart.online/coupons/"+s,{method:"DELETE"}).then((e=>{if(!e.ok)return i("Something Went Wrong, Please Refresh And Try Again");e.json()})).then((e=>{t(),window.location.reload()}))},className:"bg-red-600 text-white rounded py-2 px-5 font-semibold hover:bg-red-700 duration-300 focus:outline-none",children:"Delete Package"})]})]})]})};t.default=()=>{const{data:e,loading:t}=Object(n.a)((()=>r.a.getAllLiveCoupons())),[s,b]=Object(a.useState)(!1),[j,m]=Object(a.useState)({state:!1,data:"",id:""}),[u,f]=Object(a.useState)({state:!1,id:"",title:""}),w=()=>{m({state:!1,data:"",id:""}),b(!1),f({state:!1,id:"",title:""})},{userRef:y,setRole:N,handleChangePage:C,totalResults:v,resultsPerPage:k,dataTable:T,serviceData:S,handleSubmitUser:D}=Object(c.a)(e.data);return Object(x.jsxs)(x.Fragment,{children:[s&&Object(x.jsx)(g,{closeHandler:w}),j.state&&Object(x.jsx)(O,{closeHandler:w,data:j.data}),u.state&&Object(x.jsx)(p,{closeHandler:w,id:u.id,title:u.title}),Object(x.jsx)(d.a,{children:"All Coupons"}),Object(x.jsx)(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:Object(x.jsx)(l.CardBody,{children:Object(x.jsx)(l.Button,{onClick:()=>{b(!0),m({state:!1,data:"",id:""}),f({state:!1,id:"",title:""})},children:"Add Coupon"})})}),t?Object(x.jsx)(o.a,{loading:t}):0!==S.length?Object(x.jsxs)(l.TableContainer,{className:"mb-8 rounded-b-lg",children:[Object(x.jsxs)(l.Table,{children:[Object(x.jsx)(l.TableHeader,{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)(l.TableCell,{children:"Name"}),Object(x.jsx)(l.TableCell,{children:"Discount"}),Object(x.jsx)(l.TableCell,{children:"Expire Date"}),Object(x.jsx)(l.TableCell,{children:"Created At"}),Object(x.jsx)(l.TableCell,{className:"text-right",children:"Actions"})]})}),Object(x.jsx)(h,{packages:T,openEdit:e=>{const t="https://mix-mart.online/coupons/"+e;console.log(t),fetch(t).then((e=>e.json())).then((t=>{m({state:!0,data:t.data,id:e}),b(!1),f({state:!1,id:"",title:""})}))},startDelete:(e,t)=>{console.log("Click"),console.log(t),f({state:!0,id:e,title:t}),m({state:!1,data:"",id:""}),b(!1)}})]}),Object(x.jsx)(l.TableFooter,{children:Object(x.jsx)(l.Pagination,{totalResults:v,resultsPerPage:k,onChange:C,label:"Table navigation"})})]}):Object(x.jsx)(i.a,{title:"Packages"})]})}},91:function(e,t,s){"use strict";s(0);var a=s(43),l=s(62),n=s(1);t.a=e=>{let{id:t,openEdit:s,startDelete:c,title:i}=e;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"flex justify-end text-right",children:[Object(n.jsx)("div",{onClick:()=>s(t),className:"p-2 cursor-pointer text-gray-400 hover:text-green-600",children:Object(n.jsx)(l.a,{id:"edit",Icon:a.c,title:"Edit",bgColor:"#10B981"})}),Object(n.jsx)("div",{onClick:()=>c(t,i),className:"p-2 cursor-pointer text-gray-400 hover:text-red-600",children:Object(n.jsx)(l.a,{id:"delete",Icon:a.l,title:"Delete",bgColor:"#EF4444"})})]})})}}}]);
//# sourceMappingURL=29.c626c9f6.chunk.js.map